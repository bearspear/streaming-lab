<div class="tv-show-details" *ngIf="!loading && tvShow">
  <!-- Hero Section with Backdrop -->
  <div class="hero-section" [style.background-image]="'url(' + getBackdropUrl(tvShow.backdrop_url) + ')'">
    <div class="hero-overlay">
      <button class="back-button" (click)="goBack()">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M19 12H5M12 19l-7-7 7-7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        Back
      </button>
      <div class="hero-content">
        <div class="poster-container">
          <img [src]="getPosterUrl(tvShow.poster_url)" [alt]="tvShow.title" class="poster">
        </div>
        <div class="info">
          <h1 class="title">{{ tvShow.title }}</h1>
          <div class="meta">
            <span class="rating" *ngIf="tvShow.rating">‚≠ê {{ tvShow.rating }}/10</span>
            <span class="seasons" *ngIf="tvShow.number_of_seasons">{{ tvShow.number_of_seasons }} Season<span *ngIf="tvShow.number_of_seasons !== 1">s</span></span>
            <span class="episodes" *ngIf="tvShow.totalEpisodes">{{ tvShow.totalEpisodes }} Episode<span *ngIf="tvShow.totalEpisodes !== 1">s</span></span>
            <span class="status" *ngIf="tvShow.status">{{ tvShow.status }}</span>
          </div>
          <p class="overview" *ngIf="tvShow.overview">{{ tvShow.overview }}</p>
          <div class="genres" *ngIf="tvShow.genres && tvShow.genres.length > 0">
            <span class="genre" *ngFor="let genre of tvShow.genres">{{ genre }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Season Selector -->
  <div class="season-selector" *ngIf="tvShow.seasons && tvShow.seasons.length > 0">
    <button
      *ngFor="let season of tvShow.seasons"
      class="season-button"
      [class.active]="selectedSeason?.seasonNumber === season.seasonNumber"
      (click)="selectSeason(season)">
      Season {{ season.seasonNumber }}
    </button>
  </div>

  <!-- Episodes List -->
  <div class="episodes-section" *ngIf="selectedSeason">
    <h2>Season {{ selectedSeason.seasonNumber }} Episodes</h2>
    <div class="episodes-grid">
      <div class="episode-card" *ngFor="let episode of selectedSeason.episodes" (click)="playEpisode(episode)">
        <div class="episode-thumbnail">
          <img *ngIf="episode.still_path" [src]="episode.still_path" [alt]="episode.title">
          <div *ngIf="!episode.still_path" class="placeholder-thumbnail">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <polygon points="5 3 19 12 5 21 5 3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <div class="play-overlay">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="white">
              <polygon points="5 3 19 12 5 21 5 3"/>
            </svg>
          </div>
        </div>
        <div class="episode-info">
          <div class="episode-header">
            <span class="episode-number">E{{ episode.episode_number }}</span>
            <span class="duration" *ngIf="episode.duration">{{ formatDuration(episode.duration) }}</span>
          </div>
          <h3 class="episode-title">{{ episode.title }}</h3>
          <p class="episode-overview" *ngIf="episode.overview">{{ episode.overview }}</p>
          <p class="episode-air-date" *ngIf="episode.air_date">Air Date: {{ episode.air_date | date }}</p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Loading State -->
<div class="loading-container" *ngIf="loading">
  <div class="spinner"></div>
  <p>Loading TV show details...</p>
</div>

<!-- Error State -->
<div class="error-container" *ngIf="error">
  <p>{{ error }}</p>
  <button (click)="goBack()">Go Back</button>
</div>
